(()=>{"use strict";function t(t,e=100){let s;return function(...r){s&&clearTimeout(s),s=setTimeout((()=>t.apply(this,r)),e)}}function e(t){if(!t||"string"!=typeof t)return;let e=t.match(/^([-.\d]+(?:\.\d+)?)(.*)$/);return{value:Number(e[1].trim()),unit:e[2].trim()}}const s={InSine:t=>1-Math.cos(t*Math.PI*.5),OutSine:t=>Math.sin(t*Math.PI*.5),InOutSine:t=>.5*(1-Math.cos(t*Math.PI)),InCubic:t=>t*t*t,OutCubic:t=>{const e=t-1;return 1+e*e*e},InOutCubic:t=>{const e=t-1,s=2*t;return s<1?t*s*s:1+e*e*e*4},InQuintic:t=>t*t*t*t*t,OutQuintic:t=>{const e=t-1;return 1+e*e*e*e*e},InOutQuintic:t=>{const e=t-1,s=2*t;return s<1?t*s*s*s*s:1+e*e*e*e*e*16},InCircle:t=>1-Math.sqrt(1-t*t),OutCircle:t=>{const e=t-1;return Math.sqrt(1-e*e)},InOutCircle:t=>{const e=t-1,s=2*t;return s<1?.5*(1-Math.sqrt(1-s*s)):.5*(Math.sqrt(1-4*e*e)+1)},InBack:t=>{const e=1.70158;return t*t*(t*(e+1)-e)},OutBack:t=>{const e=t-1,s=1.70158;return 1+e*e*(e*(s+1)+s)},InOutBack:t=>{const e=t-1,s=2*t,r=2.5949095;return t<.5?t*s*(s*(r+1)-r):1+2*e*e*(2*e*(r+1)+r)},InBounce:t=>1-s.OutBounce(1-t),OutBounce:t=>{const e=1/2.75,s=7.5625,r=0;return t<e?s*t*t:t<2*e?s*(r=t-1.5*e)*r+.75:t<2.5*e?s*(r=t-2.25*e)*r+.9375:s*(r=t-2.625*e)*r+.984375},InOutBounce:t=>{const e=2*t;return e<1?.5-.5*s.OutBounce(1-e):.5+.5*s.OutBounce(e-1)},InElastic:t=>{const e=t-1;return-Math.pow(2,10*e)*Math.sin((40*e-3)*Math.PI/6)},OutElastic:t=>1+Math.pow(2,-10*t)*Math.sin((40*-t-3)*Math.PI/6),InOutElastic:t=>{const e=2*t-1,s=(80*e-9)*Math.PI/18;return e<0?-.5*Math.pow(2,10*e)*Math.sin(s):1+.5*Math.pow(2,-10*e)*Math.sin(s)}},r=s,i={axis:"y",startY:0,endY:100,startX:0,endX:100,easing:!1,responsive:!1},n={axis:"z",start:0,end:360,easing:!1,responsive:!1},o={axis:"xy",start:0,end:100,easing:!1,responsive:!1},a={start:0,end:100,easing:!1,responsive:!1},l={start:0,end:100,responsive:!1};function c(t){var e=t.getAttribute("data-scrollage-move"),s=t.getAttribute("data-scrollage-rotate"),r=t.getAttribute("data-scrollage-scale"),c=t.getAttribute("data-scrollage-fade"),h=t.getAttribute("data-scrollage-blur"),p=[];return e&&"false"!==e&&p.push({move:{...i,...JSON.parse(e)}}),s&&"false"!==s&&p.push({rotate:{...n,...JSON.parse(s)}}),r&&"false"!==r&&p.push({scale:{...o,...JSON.parse(r)}}),c&&"false"!==c&&p.push({fade:{...a,...JSON.parse(c)}}),h&&"false"!==h&&p.push({blur:{...l,...JSON.parse(h)}}),p}function h(t,e,s=0,i=!1){return i&&"string"==typeof i&&(s=r[i](s)),Math.round(t+(e-t)*s)}function p(t,s,r,i){let n=0,o=0;if(t.axis.toLowerCase().includes("x")){let o=0,a=100;if(0!==t.startX){let s=e(t.startX)?.value||0,n=e(t.startX)?.unit||"%";t.responsive[i]?.startX&&(s=e(t.responsive[i].startX)?.value||0,n=e(t.responsive[i].startX)?.unit||"%"),o="px"==n?100*s:r*s}if(0!==t.endX){let s=e(t.endX)?.value||0,n=e(t.endX)?.unit||"%";t.responsive[i]?.endX&&(s=e(t.responsive[i].endX)?.value||0,n=e(t.responsive[i].endX)?.unit||"%"),a="px"==n?100*s:r*s}n=h(o,a,s,t.easing)/100}if(t.axis.toLowerCase().includes("y")){let n=0,a=100;if(0!==t.startY){let s=e(t.startY)?.value||0,o=e(t.startY)?.unit||"%";t.responsive[i]?.startY&&(s=e(t.responsive[i]?.startY)?.value||0,o=e(t.responsive[i]?.startY)?.unit||"%"),n="px"==o?100*s:r*s}if(0!==t.endY){let s=e(t.endY)?.value||0,n=e(t.endY)?.unit||"%";t.responsive[i]?.endY&&(startYValue=e(t.responsive[i]?.endY)?.value||0,startYUnit=e(t.responsive[i]?.endY)?.unit||"%"),a="px"==n?100*s:r*s}o=h(n,a,s,t.easing)/100}return"translate:"+n+"px "+o+"px"}function u(t,e){let s=h(t.start,t.end,e,t.easing);if("z"!==t.axis.toLowerCase()){let e=t.axis.toLowerCase().split("");return"rotate:"+(e.includes("x")?1:0)+" "+(e.includes("y")?1:0)+" "+(e.includes("z")?1:0)+" "+s+"deg"}return"rotate:"+s+"deg"}function d(t,e){let s=h(t.start,t.end,e,t.easing)/100;return"xy"!==t.axis.toLowerCase()?"scale:"+("x"==t.axis.toLowerCase()?s:1)+" "+("y"==t.axis.toLowerCase()?s:1):"scale:"+s}function g(t,e){return"opacity:"+h(t.start,t.end,e,t.easing)/100}function f(t,e){return"filter:blur("+h(t.start,t.end,e)+"px)"}const w=function(){let t=!1;try{const e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassive",null,e),window.removeEventListener("testPassive",null,e)}catch(t){}return t}(),v={direction:"vertical",breakpoints:[781,1024,1366],wrapper:null,hasScrolledEnabled:!0,hasScrolledClass:"has-scrolled",hasScrolledOffset:0,hasTriggeredClassPrefix:"has-triggered-",triggers:[],trackers:[]};"undefined"!=typeof window&&(window.Scrollage=class{constructor(t=".scrollage",e={}){"loading"===document.readyState&&console.warn("ScrollageJS: DOM is not fully loaded. Ensure initialization happens after DOMContentLoaded."),e.breakpoints&&(e.breakpoints=function(t=[]){if(3===t.length&&Array.isArray(t)){var e,s=!0,r=!0;if(t.forEach((function(t){"number"!=typeof t&&(r=!1),null!==e&&t<e&&(s=!1),e=t})),s&&r)return t}console.warn("ScrollageJS: Breakpoints need to be an array of 3 values in ascending order.")}(e.breakpoints)),e.wrapper&&(e.wrapper=function(t=null){if(t){if(t instanceof HTMLElement)return t;if("string"==typeof t){let e=document.querySelector(t);if(e)return e}}console.warn("ScrollageJS: Wrapper not found. Falling back to default.")}(e.wrapper)),this.options={...v,...e},this.el=t,this.wrapper=this.options.wrapper||document.documentElement||document.body.parentNode||document.body,this.wrapperHeight=null,this.wrapperWidth=null,this.winHeight=null,this.winWidth=null,this.currentBreakpoint=null,this.isVertical=null,this.triggers=[],this.trackers=[],this.init()}init(){if(this.elems=function(t=null){return"string"==typeof t?document.querySelectorAll(t):t?[t]:null}(this.el),this.elems&&this.elems.length){var e,s;if(this.isVertical="vertical"===this.options.direction,this.wrapperHeight=this.wrapper.scrollHeight,this.wrapperWidth=this.wrapper.scrollWidth,this.winHeight=window.innerHeight,this.winWidth=window.innerWidth,this.currentBreakpoint=(e=this.options.breakpoints,(s=this.winWidth)<=e[0]?"phone":s<=e[1]?"tablet":s<=e[2]?"laptop":"desktop"),this.blocks&&this.blocks.length)for(let t=0;t<this.blocks.length;t++)this.elems[t].style.cssText=this.blocks[t].style;this.cacheBlocks(),this.cacheTriggers(),this.cacheTrackers(),this.update(),window.addEventListener("resize",t(this.init.bind(this))),window.addEventListener("orientationchange",t(this.init.bind(this))),(this.options.wrapper?this.wrapper:document).addEventListener("scroll",this.update,!!w&&{passive:!0}),(this.options.wrapper?this.wrapper:document).addEventListener("touchmove",this.update,!!w&&{passive:!0}),console.log(this)}}cacheBlocks=()=>{this.blocks=[];for(let t=0;t<this.elems.length;t++){const e=this.elems[t],s=e.getAttribute("data-scrollage-target"),r=e.getAttribute("data-scrollage-range-type"),i=e.getAttribute("data-scrollage-offset-start"),n=e.getAttribute("data-scrollage-offset-end"),o=c(e);let a=null;s&&("string"==typeof s&&(a=document.querySelector(s)),a&&a.nodeType||(console.warn("Scrollage: Your desired scroll range target doesn't exist."),a=null));const l=this.getScrollRange(a,r,i,n),h=this.getProgress(this.getScrollPos(),l);this.blocks.push({progress:h,scrollRange:l,animations:o})}};cacheTriggers=()=>{if(this.triggers=[],this.options.triggers&&Array.isArray(this.options.triggers))for(let t=0;t<this.options.triggers.length;t++){const s=this.options.triggers[t];if(s.hasOwnProperty("selector")&&s.hasOwnProperty("identifier")){let t=null;if("string"==typeof s.selector?t=document.querySelector(s.selector):s.selector?.nodeType&&(t=s.selector),!t){console.warn("ScrollageJS: Your desired trigger element does not exist.");continue}if("string"!=typeof s.identifier){console.warn("ScrollageJS: The trigger identifier needs to be a string.");continue}const r=t.getBoundingClientRect(),i=(isVertical?r.top:r.left)+this.getScrollPos();let n=0,o=0,a="%";if(s.hasOwnProperty("position")){if("string"==typeof s.position){const t=e(s.position);o=t?.value||0,a=t?.unit||"%"}else o=s.position||0;n="px"===a?o:t.clientHeight*(o/100)}let l=null;s.hasOwnProperty("target")&&(l="string"==typeof s.target?"_self"===s.target?t:document.querySelector(s.target):s.target),l&&l.nodeType||(l=this.wrapper),this.triggers.push({position:i+n,class:this.options.hasTriggeredClassPrefix+s.identifier,targetEl:l})}}};cacheTrackers=()=>{if(this.trackers=[],this.options.trackers&&Array.isArray(this.options.trackers))for(let t=0;t<this.options.trackers.length;t++){const e=this.options.trackers[t];if(e.hasOwnProperty("selector")&&e.hasOwnProperty("identifier")){let t=null;if("string"==typeof e.selector?t=document.querySelector(e.selector):e.selector?.nodeType&&(t=e.selector),!t){console.warn("ScrollageJS: Your desired tracker element does not exist.");continue}if("string"!=typeof e.identifier){console.warn("ScrollageJS: The tracker identifier needs to be a string.");continue}let s=null;e.hasOwnProperty("target")&&(s="string"==typeof e.target?"_self"===e.target?t:document.querySelector(e.target):e.target),s&&s.nodeType||(s=this.wrapper),this.trackers.push({el:t,property:"--"+e.identifier,targetEl:s})}}};triggerClasses=()=>{const t=this.getScrollPos();if(this.options.hasScrolledEnabled){const e=this.options.hasScrolledOffset||0;this.wrapper.classList.toggle(this.options.hasScrolledClass,t>e)}for(const e of this.triggers)e.targetEl.classList.toggle(e.class,t>=e.position)};trackProperties=()=>{for(const t of this.trackers){const e=this.isVertical?t.el.clientHeight:t.el.clientWidth;t.targetEl.style.setProperty(t.property,`${e}px`)}};getScrollPos=()=>this.isVertical?this.wrapper.scrollTop:this.wrapper.scrollLeft;getScrollRange=(t=null,s="default",r=0,i=0)=>{const n=this.isVertical?this.wrapperHeight:this.wrapperWidth;let o=this.wrapper,a=0,l=n;const c=e(r),h=e(i),p=c?.value||0,u=c?.unit||"%",d=h?.value||0,g=h?.unit||"%";let f="px"==u?p:n*(p/100),w="px"==g?d:n*(d/100);if(t){o=t;const e=o.getBoundingClientRect(),s=this.getScrollPos();a=Math.round(100*((this.isVertical?e.top:e.left)+s))/100,l=Math.round(100*((this.isVertical?e.bottom:e.right)+s))/100,f="px"==u?p:o.scrollHeight*(p/100),w="px"==g?d:o.scrollHeight*(d/100)}return{start:a,end:l,startOffset:f,endOffset:w,size:l+w-(a+f),type:s}};getProgress=(t,e)=>{const s=this.isVertical?this.wrapperHeight:this.wrapperWidth,r=this.isVertical?this.winHeight:this.winWidth;let i=Math.max(0,e.startOffset)-t,n=s+Math.min(0,e.endOffset)-r-t,o=0,a=0;if(0!=e.start||e.end!=s){switch(e.type){case"targetInView":o=r;break;case"targetInViewCenter":o=r/2,a=r/2}i=e.start+e.startOffset+o>r?e.start+e.startOffset-o-t:0-t,n=s-e.end-e.endOffset+a>r?e.end+e.endOffset-a-t:s-r-t}let l=i/(n-i)*-100;return l=Math.min(100,Math.max(0,l)),Math.round(l)/100};update=()=>{for(let t=0;t<this.blocks.length;t++)this.blocks[t].progress=this.getProgress(this.getScrollPos(),this.blocks[t].scrollRange);requestAnimationFrame(this.animate),this.triggerClasses(),this.trackProperties()};animate=()=>{for(let t=0;t<this.blocks.length;t++){const e=this.blocks[t];if(!e.animations.length)continue;const s=e.scrollRange.end-e.scrollRange.start,r=e.progress,i=this.currentBreakpoint,n=[];for(let t=0;t<e.animations.length;t++){const o=e.animations[t];!o.move||o.move.responsive&&!o.move.responsive[i]||n.push(p(o.move,r,s,i)),!o.rotate||o.rotate.responsive&&!o.rotate.responsive[i]||n.push(u(o.rotate,r)),!o.scale||o.scale.responsive&&!o.scale.responsive[i]||n.push(d(o.scale,r)),!o.fade||o.fade.responsive&&!o.fade.responsive[i]||n.push(g(o.fade,r)),!o.blur||o.blur.responsive&&!o.blur.responsive[i]||n.push(f(o.blur,r))}n.length&&(this.elems[t].style.cssText=n.join("; "))}};destroy=()=>{for(let t=0;t<this.elems.length;t++)this.elems[t].style.cssText=this.blocks[t].style;this.blocks=[],this.triggers=[],this.trackers=[],(this.options.wrapper?this.wrapper:document).removeEventListener("scroll",this.update),(this.options.wrapper?this.wrapper:document).removeEventListener("touchmove",this.update),window.removeEventListener("resize",t(this.init.bind(this))),window.removeEventListener("orientationchange",t(this.init.bind(this)))}})})();