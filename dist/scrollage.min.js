/*! For license information please see LICENSE.txt */
(()=>{"use strict";var t={};t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}();var e=function(){if("undefined"!=typeof Map)return Map;function t(t,e){var n=-1;return t.some((function(t,i){return t[0]===e&&(n=i,!0)})),n}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(e){var n=t(this.__entries__,e),i=this.__entries__[n];return i&&i[1]},e.prototype.set=function(e,n){var i=t(this.__entries__,e);~i?this.__entries__[i][1]=n:this.__entries__.push([e,n])},e.prototype.delete=function(e){var n=this.__entries__,i=t(n,e);~i&&n.splice(i,1)},e.prototype.has=function(e){return!!~t(this.__entries__,e)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,e){void 0===e&&(e=null);for(var n=0,i=this.__entries__;n<i.length;n++){var s=i[n];t.call(e,s[1],s[0])}},e}()}(),n="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,i=void 0!==t.g&&t.g.Math===Math?t.g:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),s="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(i):function(t){return setTimeout((function(){return t(Date.now())}),1e3/60)};var r=["top","right","bottom","left","width","height","size","weight"],o="undefined"!=typeof MutationObserver,a=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(t,e){var n=!1,i=!1,r=0;function o(){n&&(n=!1,t()),i&&c()}function a(){s(o)}function c(){var t=Date.now();if(n){if(t-r<2)return;i=!0}else n=!0,i=!1,setTimeout(a,e);r=t}return c}(this.refresh.bind(this),20)}return t.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},t.prototype.removeObserver=function(t){var e=this.observers_,n=e.indexOf(t);~n&&e.splice(n,1),!e.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},t.prototype.updateObservers_=function(){var t=this.observers_.filter((function(t){return t.gatherActive(),t.hasActive()}));return t.forEach((function(t){return t.broadcastActive()})),t.length>0},t.prototype.connect_=function(){n&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),o?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){n&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(t){var e=t.propertyName,n=void 0===e?"":e;r.some((function(t){return!!~n.indexOf(t)}))&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),c=function(t,e){for(var n=0,i=Object.keys(e);n<i.length;n++){var s=i[n];Object.defineProperty(t,s,{value:e[s],enumerable:!1,writable:!1,configurable:!0})}return t},u=function(t){return t&&t.ownerDocument&&t.ownerDocument.defaultView||i},h=g(0,0,0,0);function l(t){return parseFloat(t)||0}function d(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.reduce((function(e,n){return e+l(t["border-"+n+"-width"])}),0)}function f(t){var e=t.clientWidth,n=t.clientHeight;if(!e&&!n)return h;var i=u(t).getComputedStyle(t),s=function(t){for(var e={},n=0,i=["top","right","bottom","left"];n<i.length;n++){var s=i[n],r=t["padding-"+s];e[s]=l(r)}return e}(i),r=s.left+s.right,o=s.top+s.bottom,a=l(i.width),c=l(i.height);if("border-box"===i.boxSizing&&(Math.round(a+r)!==e&&(a-=d(i,"left","right")+r),Math.round(c+o)!==n&&(c-=d(i,"top","bottom")+o)),!function(t){return t===u(t).document.documentElement}(t)){var f=Math.round(a+r)-e,p=Math.round(c+o)-n;1!==Math.abs(f)&&(a-=f),1!==Math.abs(p)&&(c-=p)}return g(s.left,s.top,a,c)}var p="undefined"!=typeof SVGGraphicsElement?function(t){return t instanceof u(t).SVGGraphicsElement}:function(t){return t instanceof u(t).SVGElement&&"function"==typeof t.getBBox};function v(t){return n?p(t)?function(t){var e=t.getBBox();return g(0,0,e.width,e.height)}(t):f(t):h}function g(t,e,n,i){return{x:t,y:e,width:n,height:i}}var b=function(){function t(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=g(0,0,0,0),this.target=t}return t.prototype.isActive=function(){var t=v(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},t}(),m=function(t,e){var n,i,s,r,o,a,u,h=(i=(n=e).x,s=n.y,r=n.width,o=n.height,a="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,u=Object.create(a.prototype),c(u,{x:i,y:s,width:r,height:o,top:s,right:i+r,bottom:o+s,left:i}),u);c(this,{target:t,contentRect:h})},y=function(){function t(t,n,i){if(this.activeObservations_=[],this.observations_=new e,"function"!=typeof t)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=n,this.callbackCtx_=i}return t.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof u(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)||(e.set(t,new b(t)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof u(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)&&(e.delete(t),e.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach((function(e){e.isActive()&&t.activeObservations_.push(e)}))},t.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,e=this.activeObservations_.map((function(t){return new m(t.target,t.broadcastRect())}));this.callback_.call(t,e,t),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),w="undefined"!=typeof WeakMap?new WeakMap:new e,_=function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=a.getInstance(),i=new y(e,n,this);w.set(this,i)};["observe","unobserve","disconnect"].forEach((function(t){_.prototype[t]=function(){var e;return(e=w.get(this))[t].apply(e,arguments)}}));const M=void 0!==i.ResizeObserver?i.ResizeObserver:_;function S(t,e=100){let n;return function(...i){n&&clearTimeout(n),n=setTimeout((()=>t.apply(this,i)),e)}}function E(t){if("number"==typeof t)return{value:t};if(!t||"string"!=typeof t)return;let e=t.match(/^([-.\d]+(?:\.\d+)?)(.*)$/);return{value:Number(e[1].trim()),unit:e[2].trim()}}function O(t,e,n,i,s=0){switch(t){case"vw":return n.x*e/100;case"vh":return n.y*e/100;case"px":return e;default:return(i-s)*e/100}}function x(t,e=1){return Math.round(t*10**e)/10**e}function k(t,e="element"){if(t instanceof HTMLElement)return t;if("string"==typeof t){const e=document.querySelector(t);if(e)return e}return console.warn(`ScrollageJS: Your desired ${e} "${t}" is not a valid element or selector.`),null}function z(t,e="JSON data"){try{return JSON.parse(t)}catch(t){return console.warn(`ScrollageJS: Invalid JSON in ${e}.`,t),{}}}const T={insine:t=>1-Math.cos(t*Math.PI*.5),outsine:t=>Math.sin(t*Math.PI*.5),inoutsine:t=>.5*(1-Math.cos(t*Math.PI)),incubic:t=>t*t*t,outcubic:t=>{const e=t-1;return 1+e*e*e},inoutcubic:t=>{const e=t-1,n=2*t;return n<1?t*n*n:1+e*e*e*4},inquintic:t=>t*t*t*t*t,outquintic:t=>{const e=t-1;return 1+e*e*e*e*e},inoutquintic:t=>{const e=t-1,n=2*t;return n<1?t*n*n*n*n:1+e*e*e*e*e*16},incircle:t=>1-Math.sqrt(1-t*t),outcircle:t=>{const e=t-1;return Math.sqrt(1-e*e)},inoutcircle:t=>{const e=t-1,n=2*t;return n<1?.5*(1-Math.sqrt(1-n*n)):.5*(Math.sqrt(1-4*e*e)+1)},inback:t=>{const e=1.70158;return t*t*(t*(e+1)-e)},outback:t=>{const e=t-1,n=1.70158;return 1+e*e*(e*(n+1)+n)},inoutback:t=>{const e=t-1,n=2*t,i=2.5949095;return t<.5?t*n*(n*(i+1)-i):1+2*e*e*(2*e*(i+1)+i)},inbounce:t=>1-T.OutBounce(1-t),outbounce:t=>{const e=1/2.75,n=7.5625,i=0;return t<e?n*t*t:t<2*e?n*(i=t-1.5*e)*i+.75:t<2.5*e?n*(i=t-2.25*e)*i+.9375:n*(i=t-2.625*e)*i+.984375},inoutbounce:t=>{const e=2*t;return e<1?.5-.5*T.OutBounce(1-e):.5+.5*T.OutBounce(e-1)},inelastic:t=>{const e=t-1;return-Math.pow(2,10*e)*Math.sin((40*e-3)*Math.PI/6)},outelastic:t=>1+Math.pow(2,-10*t)*Math.sin((40*-t-3)*Math.PI/6),inoutelastic:t=>{const e=2*t-1,n=(80*e-9)*Math.PI/18;return e<0?-.5*Math.pow(2,10*e)*Math.sin(n):1+.5*Math.pow(2,-10*e)*Math.sin(n)}},A=T,L={move:{x:{start:{unit:"%",value:0},end:{unit:"%",value:0}},y:{start:{unit:"%",value:0},end:{unit:"%",value:0}},easing:!1,responsive:null},rotate:{start:{value:0},end:{value:0},x:{start:{value:0},end:{value:0}},y:{start:{value:0},end:{value:0}},z:{start:{value:0},end:{value:0}},easing:!1,responsive:null},scale:{start:{value:100},end:{value:100},x:{start:{value:100},end:{value:100}},y:{start:{value:100},end:{value:100}},z:{start:{value:100},end:{value:100}},easing:!1,responsive:null},fade:{start:{value:100},end:{value:100},easing:!1,responsive:null},saturate:{start:{value:100},end:{value:100},responsive:null},blur:{start:{value:0},end:{value:0},responsive:null}};function P(t,e){const n=Object.keys(t).reduce(((e,n)=>(e[n.toLowerCase()]=t[n],e)),{});if("start"in n||"end"in n)return{start:"start"in n?E(n.start):e.start,end:"end"in n?E(n.end):e.end};const i=["x","y","z"],s={};for(const t of i)e[t]&&(n[`start${t}`]||n[`end${t}`])&&(s[t]={start:n[`start${t}`]?E(n[`start${t}`]):e[t].start,end:n[`end${t}`]?E(n[`end${t}`]):e[t].end});return s}function R(t){const e=[],n=Object.keys(L);for(const i of n){const n=`data-animation-${i}`,s=t.getAttribute(n);if(s){const t=z(s,n),r=t.responsive||{},o=Object.keys(r).reduce(((t,e)=>(t[e]=P(r[e],L[i]),t)),{});e.push({[i]:{...P(t,L[i]),responsive:Object.keys(r).length?o:void 0,easing:t.easing||void 0}})}}return e}function $(t,e,n=0,i=!1){return n=Math.max(0,Math.min(1,n)),i&&A[i.toLowerCase()]&&(n=A[i.toLowerCase()](n)),t+(e-t)*n}function D(t,e,n,i,s){const r=r=>{if(!t[r])return 0;const{start:o,end:a}=t[r];return $(O(o.unit,o.value,s,n[r],i[r]),O(a.unit,a.value,s,n[r],i[r]),e,t.easing)};return`translate(${x(r("x"))}px, ${x(r("y"))}px)`}function j(t,e){const n=n=>t[n]?$(t[n].start.value,t[n].end.value,e,t.easing):null;if(t.start&&t.end){return`rotate(${x($(t.start.value,t.end.value,e,t.easing))}deg)`}const i=[];return t.x&&i.push(`rotateX(${x(n("x"))}deg)`),t.y&&i.push(`rotateY(${x(n("y"))}deg)`),t.z&&i.push(`rotateZ(${x(n("z"))}deg)`),i.join(" ")}function B(t,e){const n=n=>t[n]?$(t[n].start.value/100,t[n].end.value/100,e,t.easing):null;if(t.start&&t.end){return`scale(${x($(t.start.value/100,t.end.value/100,e,t.easing),2)})`}const i=[];return t.x&&i.push(`scaleX(${n("x")})`),t.y&&i.push(`scaleY(${n("y")})`),i.join(" ")}function q(t,e){return x($(t.start.value,t.end.value,e,t.easing)/100,2)}function C(t,e){return`blur(${x($(t.start.value,t.end.value,e),0)}px)`}class V{static version="1.0.0";static supportsPassive=function(){let t=!1;try{const e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassive",null,e),window.removeEventListener("testPassive",null,e)}catch(t){}return t}();static DEFAULT_OPTIONS={direction:"vertical",source:null,breakpoints:[781,1024,1366],triggers:[]};constructor(t,e={}){"loading"===document.readyState&&console.warn("ScrollageJS: DOM is not fully loaded. Ensure initialization happens after `DOMContentLoaded`."),this.el=t||".scrollage",this.options={...V.DEFAULT_OPTIONS,...e},this.source=null,this.isDocumentSource=!0,this.sourceSizes={},this.winSizes={},this.wrapperSizes={},this.currentBreakpoint=null,this.reducedMotion=!1,this.breakpoints=[],this.elems=[],this.blocks=[],this.triggers=[],this.init()}init(){if(this.reducedMotion=window.matchMedia("(prefers-reduced-motion: reduce)").matches,this.reducedMotion&&console.warn('ScrollageJS: "prefers-reduced-motion" is enabled. Animations will be disabled.'),this.elems="string"==typeof this.el?document.querySelectorAll(this.el):this.el instanceof NodeList?this.el:[this.el],this.elems&&this.elems.length){var t,e;if(this.isVertical="horizontal"!==this.options.direction,this.options.source?(this.source=k(this.options.source,"source"),this.isDocumentSource=!1):this.options.source&&this.source||(this.source=document.documentElement||document.body,this.isDocumentSource=!0),this.sourceSizes={x:this.source.scrollWidth,y:this.source.scrollHeight},this.wrapperSizes={x:this.source.offsetWidth,y:this.source.offsetHeight},this.winSizes={x:window.innerWidth,y:window.innerHeight},this.breakpoints=function(t=[]){if(3===t.length&&Array.isArray(t)){let e,n=!0,i=!0;if(t.forEach((t=>{"number"!=typeof t&&(i=!1),null!==e&&t<e&&(n=!1),e=t})),n&&i)return!0}return console.warn("ScrollageJS: Breakpoints need to be an array of 3 values in ascending order."),!1}(this.options.breakpoints)?this.options.breakpoints:V.DEFAULT_OPTIONS.breakpoints,this.currentBreakpoint=(t=this.winSizes.x,e=this.breakpoints,t<=e[0]?"phone":t<=e[1]?"tablet":t<=e[2]?"laptop":"desktop"),this.blocks?.length)for(let t=0;t<this.blocks.length;t++)this.elems[t].style.cssText=this.blocks[t].originalStyles||"";this.cacheBlocks(),this.cacheTriggers(),window.addEventListener("resize",S(this.init.bind(this))),window.addEventListener("orientationchange",S(this.init.bind(this))),(this.options.source?this.source:window).addEventListener("scroll",this.update,!!V.supportsPassive&&{passive:!0}),(this.options.source?this.source:window).addEventListener("touchmove",this.update,!!V.supportsPassive&&{passive:!0}),this.resizeObserver||(this.resizeObserver=new M(S((()=>this.init()),100)),this.resizeObserver.observe(this.source)),this.update(),console.log(this)}}cacheBlocks=()=>{this.blocks=[];for(let t=0;t<this.elems.length;t++){const e=this.elems[t],n=e.getAttribute("data-timeline-scope"),i=e.getAttribute("data-animation-range");let s=0,r=0;if(i){const t=i.split(/\s+/);s=t[0]||0,r=t[1]||0}const o=e.style.cssText,a=R(e),c=n?k(n,"timeline scope"):null,u={x:c?.clientWidth||this.source.scrollWidth,y:c?.clientHeight||this.source.scrollHeight},h={x:e.clientWidth,y:e.clientHeight},l=this.getTimelineRange(c,s,r),d=this.getScrollProgress(c,l);this.blocks.push({progress:d,scopeEl:c,scopeSizes:u,elSizes:h,timelineRangeData:l,animations:a,originalStyles:o})}};cacheTriggers=()=>{if(this.triggers=[],this.options.triggers&&Array.isArray(this.options.triggers))for(let t=0;t<this.options.triggers.length;t++){const e=this.options.triggers[t];if(!e.class||"string"!=typeof e.class)continue;const n=e.scope?k(e.scope,"trigger scope"):null;if(e.scope&&!n)continue;const i="_self"===e.target?n:e.target?k(e.target,"trigger target"):null;if(e.target&&!i)continue;const s=E(e.position)||{value:0};let r,o=0;if(e.scope){const t=this.isVertical?n.scrollHeight:n.scrollWidth,e=n.getBoundingClientRect();o=(this.isVertical?e.top:e.left)+this.getScrollPos(),r=O(s.unit,s.value,this.winSizes,t)}else{const t=this.sourceSizes[this.isVertical?"y":"x"];r=O(s.unit,s.value,this.winSizes,t)}this.triggers.push({position:o+r,class:e.class,targetEl:i||this.source})}};triggerClasses=()=>{const t=this.getScrollPos();for(const e of this.triggers)t>e.position?e.targetEl.classList.add(e.class):e.targetEl.classList.remove(e.class)};getScrollPos=()=>this.isVertical?this.source.scrollTop:this.source.scrollLeft;getTimelineRange=(t=null,e=0,n=0)=>{const i=this.winSizes[this.isVertical?"y":"x"],s=this.wrapperSizes[this.isVertical?"y":"x"],r=E(e),o=E(n),a=r?.value||0,c=r?.unit||"%",u=o?.value||0,h=o?.unit||"%";let l,d,f,p=0,v=0,g=0,b=0,m=this.sourceSizes[this.isVertical?"y":"x"];const y=this.isDocumentSource?i:s;if(t&&t!=this.source){l=this.isVertical?t.offsetHeight:t.offsetWidth;const e=this.isVertical?this.source.getBoundingClientRect().top:this.source.getBoundingClientRect().left;d=(this.isVertical?t.getBoundingClientRect().top:t.getBoundingClientRect().left)-e,f=d+l,g=O(c,a,this.winSizes,l),b=O(h,u,this.winSizes,l),p=Math.max(0,d+g-y),v=Math.max(p,Math.min(f+b,m-y))}else g=O(c,a,this.winSizes,m),b=O(h,u,this.winSizes,m),p=Math.max(0,g-y),v=Math.max(p,Math.min(m+b,m-y));return{start:p,end:v}};getScrollProgress=(t=null,e=null)=>{const n=this.getScrollPos(),i=t?k(t,"scope"):this.source;e||(e=this.getTimelineRange(i));const s=e.start-n;let r=s/(e.end-n-s)*-100;return r=Math.min(100,Math.max(0,r)),r/100};update=()=>{for(let t=0;t<this.blocks.length;t++)this.blocks[t].progress=this.getScrollProgress(this.blocks[t].scopeEl,this.blocks[t].timelineRangeData);this.triggerClasses(),this.reducedMotion||requestAnimationFrame(this.animate)};animate=()=>{for(let n=0;n<this.blocks.length;n++){const i=this.blocks[n];if(!i.animations.length)continue;const s=this.currentBreakpoint,r=this.elems[n];let o,a=[],c=[],u=null;for(let n=0;n<i.animations.length;n++){const r=i.animations[n];r.move&&(o=r.move.responsive?.[s]||r.move,a.push(D(o,i.progress,i.scopeSizes,i.elSizes,this.winSizes))),r.rotate&&(o=r.rotate.responsive?.[s]||r.rotate,a.push(j(o,i.progress))),r.scale&&(o=r.scale.responsive?.[s]||r.scale,a.push(B(o,i.progress))),r.saturate&&(o=r.saturate.responsive?.[s]||r.saturate,o.start&&o.end&&c.push((t=o,e=i.progress,`saturate(${x($(t.start.value,t.end.value,e),0)}%)`))),r.blur&&(o=r.blur.responsive?.[s]||r.blur,o.start&&o.end&&c.push(C(o,i.progress))),r.fade&&(o=r.fade.responsive?.[s]||r.fade,o.start&&o.end&&(u=q(o,i.progress)))}a.length&&(r.style.transform=a.join(" ")),c.length&&(r.style.filter=c.join(" ")),null!=u&&(r.style.opacity=u)}var t,e};destroy=()=>{for(let t=0;t<this.elems.length;t++)this.elems[t].style.cssText=this.blocks[t]?.originalStyles||"";this.elems=[],this.blocks=[];for(let t=0;t<this.triggers.length;t++)this.triggers[t].targetEl.classList.remove(this.triggers[t]?.class);this.triggers=[],(this.options.source?this.source:window).removeEventListener("scroll",this.update),(this.options.source?this.source:window).removeEventListener("touchmove",this.update),window.removeEventListener("resize",S(this.init.bind(this))),window.removeEventListener("orientationchange",S(this.init.bind(this))),this.resizeObserver.disconnect()}}"undefined"!=typeof window&&(window.Scrollage=V)})();